<!DOCTYPE html>
<html>
<head>
    <title>Episode List</title>
    <!-- Include Bootstrap CSS/JS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+Knujsl5+5hb7ie3eER/TKPMSfp6u2AM8D91FppE5acjQoR" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoIVzLkU6Bhp9KYuHtK7eK4e8wD4ywt7LF05Gx5p6Bv/3eM" crossorigin="anonymous"></script>
</head>
<body class="container mt-5">
    <h1 class="mb-4">Library Episodes</h1>

    <!-- Search Form -->
    <form method="get" action="" class="mb-4 d-flex">
        <input type="text" name="q" placeholder="Search sentences..." value="{{ query|default:'' }}" class="form-control me-2">
        <button type="submit" class="btn btn-primary">Search</button>
    </form>

    <!-- Search Results -->
    {% if query %}
        <h2 class="mt-4">Search Results for "{{ query }}"</h2>
        <ul class="list-group">
            {% for sentence in matching_sentences %}
                <li class="list-group-item">
                    <a href="{{ sentence.link }}" class="text-decoration-none">{{ sentence.text }}</a>
                    <small class="text-muted">(in <a href="{{ sentence.link }}" class="text-muted">{{ sentence.episode.title }}</a>)</small>
                </li>
            {% endfor %}
        </ul>
    {% endif %}

    <!-- Episodes List -->
    <h2 class="mt-5">All Episodes</h2>
    <ul class="list-group">
        {% for episode in episodes %}
            <li class="list-group-item">
                <h4>{{ episode.title }}</h4>
                <p class="mb-1">{{ episode.description }}</p>
                <a href="{{ episode.get_absolute_url }}" class="btn btn-outline-primary">View Episode</a>
            </li>
        {% endfor %}
    </ul>
</body>
</html>
